<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <style>
      /* Basic styling for the form */
      form {
        max-width: 550px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      label, select, input, textarea {
        display: block;
        margin-bottom: 0px;
        width: 100%;
      }
      input[type="submit"] {
        margin-top: 20px;
      }
      select, input, textarea {
        font-family: 'Courier New', Courier, monospace;
        font-size: medium;
      }
      h1, h3, label, input[type="submit"] {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      }
    </style>
  </head>
  <body>
    <h1><center>Delete 加油 ("jiā yóu") Events</center></h1>
    <h3><center><font style="color: red;">CAUTION: Deleted events are not recoverable!</font></center></h3>
    <form id="calendarForm">
      <label for="calendarName">Calendar name:</label>
      <input type="text" id="calendarName" name="calendarName" required>
      <!-- Must name it differently from the owner name -->
      </br>

      <label for="query">Search query:</label>
      <input type="text" id="query" name="query" required>
      <!-- Query ignores any extra spacing -->
      </br>

      <input type="submit" value="Submit">
    </form>
    
    <script>
      // JavaScript handles form submission and sends data to the Google Apps Script
      document.getElementById('calendarForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevents the form from submitting the traditional way

        var calendarName = document.getElementById('calendarName').value;
        var query = document.getElementById('query').value;

        google.script.run.withSuccessHandler(function(response) {
          alert(response); // Displays a success message
        }).deleteEvents(calendarName, query);
      });
    </script>
  </body>
</html>